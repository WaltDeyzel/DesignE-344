Version 4
SHEET 1 2356 820
WIRE 1184 -496 1040 -496
WIRE 848 -480 704 -480
WIRE 144 -432 80 -432
WIRE 192 -432 144 -432
WIRE 368 -432 256 -432
WIRE 432 -432 368 -432
WIRE 1040 -416 1040 -496
WIRE 1072 -416 1040 -416
WIRE 704 -400 704 -480
WIRE 736 -400 704 -400
WIRE 1184 -400 1184 -496
WIRE 1184 -400 1136 -400
WIRE 1200 -400 1184 -400
WIRE 848 -384 848 -480
WIRE 848 -384 800 -384
WIRE 864 -384 848 -384
WIRE 976 -384 976 -416
WIRE 1072 -384 976 -384
WIRE 624 -368 624 -400
WIRE 736 -368 624 -368
WIRE 976 -368 976 -384
WIRE 224 -352 224 -368
WIRE 624 -352 624 -368
WIRE 400 -192 144 -192
WIRE 400 -96 400 -192
WIRE 400 -96 256 -96
WIRE 144 -80 144 -192
WIRE 1168 -48 1136 -48
WIRE 1328 -48 1248 -48
WIRE -800 0 -848 0
WIRE -992 16 -1040 16
WIRE -896 16 -944 16
WIRE -848 16 -848 0
WIRE 256 32 256 -96
WIRE 272 32 256 32
WIRE 992 32 832 32
WIRE 1136 32 1136 -48
WIRE 1136 32 1072 32
WIRE 400 48 400 -96
WIRE 400 48 336 48
WIRE 432 48 400 48
WIRE 48 64 -32 64
WIRE 144 64 144 -16
WIRE 144 64 128 64
WIRE 256 64 224 64
WIRE 272 64 256 64
WIRE 1136 64 1136 32
WIRE 1184 64 1136 64
WIRE 1328 80 1328 -48
WIRE 1328 80 1248 80
WIRE 1392 80 1328 80
WIRE -992 96 -992 16
WIRE -944 96 -992 96
WIRE -896 96 -896 16
WIRE -848 96 -896 96
WIRE 1184 96 1136 96
WIRE -1040 112 -1040 96
WIRE 256 112 256 64
WIRE 1136 160 1136 96
WIRE 240 288 112 288
WIRE 432 288 240 288
WIRE -992 304 -1056 304
WIRE 112 320 112 288
WIRE -992 352 -992 304
WIRE -880 352 -912 352
WIRE -880 448 -928 448
WIRE 240 448 240 288
WIRE 288 448 240 448
WIRE 1024 448 896 448
WIRE 1136 448 1104 448
WIRE 432 464 432 288
WIRE 432 464 352 464
WIRE 1248 464 1200 464
WIRE 1296 464 1248 464
WIRE -16 480 -112 480
WIRE 80 480 48 480
WIRE 112 480 112 400
WIRE 112 480 80 480
WIRE 144 480 112 480
WIRE 240 480 208 480
WIRE 288 480 240 480
WIRE 928 480 896 480
WIRE 1072 480 1008 480
WIRE 1136 480 1072 480
WIRE -880 496 -928 496
WIRE 240 560 240 480
WIRE 1072 624 1072 480
WIRE 1136 624 1072 624
WIRE 1248 624 1248 464
WIRE 1248 624 1216 624
FLAG -1040 112 0
FLAG -800 0 Stimulus
FLAG -880 352 9V
IOPIN -880 352 Out
FLAG -1056 384 0
FLAG -880 448 VoutBeatPulses
IOPIN -880 448 Out
FLAG -880 496 VoutRateAnalogue
IOPIN -880 496 Out
FLAG -112 480 Stimulus
FLAG 224 -352 0
FLAG 80 -432 9V
IOPIN 80 -432 In
FLAG 144 -368 0
FLAG 368 -368 0
FLAG 432 -432 5v
IOPIN 432 -432 Out
FLAG 304 80 0
FLAG 304 16 5v
IOPIN 304 16 In
FLAG 256 176 0
FLAG 832 32 filter-out
IOPIN 832 32 In
FLAG 1216 112 0
FLAG 1216 48 5v
IOPIN 1216 48 In
FLAG 432 48 filter-out
IOPIN 432 48 Out
FLAG 320 432 5v
IOPIN 320 432 In
FLAG 320 496 0
FLAG 432 464 high-pass-out
IOPIN 432 464 Out
FLAG -32 64 high-pass-out
IOPIN -32 64 In
FLAG 240 640 ofset
IOPIN 240 640 In
FLAG 1136 160 ofset
IOPIN 1136 160 In
FLAG 1392 80 amplify
IOPIN 1392 80 Out
FLAG 624 -480 5v
IOPIN 624 -480 In
FLAG 624 -272 0
FLAG 864 -384 ref
IOPIN 864 -384 Out
FLAG 768 -352 0
FLAG 768 -416 5v
IOPIN 768 -416 In
FLAG 80 480 a
FLAG 240 480 b
FLAG 144 64 c
FLAG 256 64 d
FLAG 1136 96 e
FLAG 1136 32 f
FLAG 624 -368 h
FLAG 976 -496 5v
IOPIN 976 -496 In
FLAG 976 -288 0
FLAG 1200 -400 ofset
IOPIN 1200 -400 Out
FLAG 1104 -368 0
FLAG 1104 -432 5v
IOPIN 1104 -432 In
FLAG 1296 464 VoutBeatPulses
IOPIN 1296 464 Out
FLAG 1168 496 0
FLAG 1168 432 5v
IOPIN 1168 432 In
FLAG 896 448 amplify
IOPIN 896 448 In
FLAG 896 480 ref
IOPIN 896 480 In
SYMBOL voltage -944 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -89 197 Left 2
WINDOW 0 -13 54 Left 2
SYMATTR Value PWL file=PWLinput.csv
SYMATTR InstName V1
SYMBOL voltage -848 0 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -386 233 Left 2
WINDOW 0 -11 56 Left 2
SYMATTR Value SINE({sineOffset} {sineAmplitude} {sineFreq})
SYMATTR InstName V2
SYMBOL voltage -1040 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 3 160 Left 2
WINDOW 0 -13 55 Left 2
SYMATTR Value {dcAmplitude}
SYMATTR InstName V3
SYMBOL voltage -1056 288 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -46 76 Left 2
WINDOW 0 -13 57 Left 2
SYMATTR Value 9
SYMATTR InstName V4
SYMBOL res -896 336 R90
WINDOW 0 -9 30 VBottom 2
WINDOW 3 34 56 VTop 2
SYMATTR InstName R_Sense1
SYMATTR Value 0.010
SYMBOL LM7805 224 -416 R0
SYMATTR InstName U1
SYMBOL cap 352 -432 R0
WINDOW 3 -63 56 Left 2
WINDOW 0 -48 27 Left 2
SYMATTR Value 0.33µ
SYMATTR InstName C1
SYMBOL cap 128 -432 R0
WINDOW 0 -37 29 Left 2
WINDOW 3 -42 52 Left 2
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res 240 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 144 48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 35 59 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cap 160 -16 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C3
SYMATTR Value 900n
SYMBOL cap 272 176 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value 450n
SYMBOL Opamps\\opamp2 304 -16 R0
SYMATTR InstName U2
SYMATTR Value TL081
SYMBOL res 1088 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 1264 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 480k
SYMBOL Opamps\\opamp2 320 400 R0
WINDOW 3 12 96 Left 2
SYMATTR Value TL081
SYMATTR InstName U3
SYMBOL res 224 544 R0
SYMATTR InstName R9
SYMATTR Value 2000k
SYMBOL res 96 304 R0
SYMATTR InstName R10
SYMATTR Value 750530
SYMBOL cap 208 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL cap 48 464 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 0.1µ
SYMBOL res 608 -496 R0
SYMATTR InstName R11
SYMATTR Value 50k
SYMBOL res 608 -368 R0
SYMATTR InstName R12
SYMATTR Value 150k
SYMBOL Opamps\\opamp2 768 -448 R0
SYMATTR InstName U5
SYMATTR Value TL081
SYMBOL res 960 -512 R0
SYMATTR InstName R13
SYMATTR Value 500k
SYMBOL res 960 -384 R0
SYMATTR InstName R14
SYMATTR Value 500k
SYMBOL Opamps\\opamp2 1104 -464 R0
SYMATTR InstName U6
SYMATTR Value TL081
SYMBOL res 1120 432 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 10k
SYMBOL res 1024 464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 1232 608 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 1000k
SYMBOL Comparators\\LT1018 1168 464 R0
WINDOW 3 -46 64 Left 2
SYMATTR InstName U7
SYMBOL Opamps\\opamp2 1216 16 R0
SYMATTR InstName U8
SYMATTR Value TLC2272
TEXT -1040 -48 Left 2 !.tran 0 {transtop} 0 {timestep}
TEXT -912 -96 Left 2 !.include E344cfg.txt
TEXT -1248 -312 Left 2 ;Don't change these -- used for auto-assessments.\nYou may modify input files while developing.\nFor submission: \n  * Use only 9V supply \n  * Connect "Stimulus" to your input\n  * Connect "VoutXXXX" to your output signals.\n  * Only one label name per net.
TEXT -1240 -96 Left 2 ;Config file:
TEXT -1240 -48 Left 2 ;Analysis setup:
TEXT -1232 328 Left 2 ;Battery
TEXT -1240 40 Left 2 ;Sensor-\nemulating \nstimulus
TEXT -1232 464 Left 2 ;Assessed nets:\nConnect to your outputs
TEXT -296 -416 Left 2 ;W. Deyzel.,  21750793\nDC = 1900 mV\nHeart rate pk = 66.6 mV
TEXT -304 -480 Left 2 !.incl TLC2272.LIB
TEXT -304 -456 Left 2 !.incl TL081.lib
LINE Normal -752 64 -816 64 2
LINE Normal -752 208 -752 64 2
LINE Normal -768 192 -752 208 2
LINE Normal -752 208 -768 192 2
LINE Normal -736 192 -752 208 2
LINE Normal -1088 64 -1072 64 2
LINE Normal -1088 144 -1088 64 2
LINE Normal -1088 160 -1088 144 2
LINE Normal -1056 160 -1088 160 2
LINE Normal -1072 144 -1056 160 2
LINE Normal -1056 160 -1072 144 2
LINE Normal -1072 176 -1056 160 2
LINE Normal -928 128 -928 80 2
LINE Normal -816 128 -928 128 2
LINE Normal -816 176 -816 128 2
LINE Normal -832 160 -816 176 2
LINE Normal -816 176 -832 160 2
LINE Normal -800 160 -816 176 2
LINE Normal -1264 528 -1264 -336 1
LINE Normal -640 -336 -640 528 1
LINE Normal -640 528 -1264 528 1
LINE Normal -640 -336 -1264 -336 1
