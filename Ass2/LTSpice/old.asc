Version 4
SHEET 1 1824 680
WIRE 496 -1568 352 -1568
WIRE -224 -1552 -368 -1552
WIRE 160 -1552 16 -1552
WIRE -896 -1504 -960 -1504
WIRE -848 -1504 -896 -1504
WIRE -672 -1504 -784 -1504
WIRE -608 -1504 -672 -1504
WIRE 352 -1488 352 -1568
WIRE 384 -1488 352 -1488
WIRE -368 -1472 -368 -1552
WIRE -336 -1472 -368 -1472
WIRE 16 -1472 16 -1552
WIRE 48 -1472 16 -1472
WIRE 496 -1472 496 -1568
WIRE 496 -1472 448 -1472
WIRE 512 -1472 496 -1472
WIRE -224 -1456 -224 -1552
WIRE -224 -1456 -272 -1456
WIRE -208 -1456 -224 -1456
WIRE 160 -1456 160 -1552
WIRE 160 -1456 112 -1456
WIRE 176 -1456 160 -1456
WIRE 288 -1456 288 -1488
WIRE 384 -1456 288 -1456
WIRE -432 -1440 -432 -1472
WIRE -336 -1440 -432 -1440
WIRE -64 -1440 -64 -1472
WIRE 48 -1440 -64 -1440
WIRE 288 -1440 288 -1456
WIRE -816 -1424 -816 -1440
WIRE -432 -1424 -432 -1440
WIRE -64 -1424 -64 -1440
WIRE -768 -1264 -896 -1264
WIRE -640 -1264 -704 -1264
WIRE 240 -1232 208 -1232
WIRE 400 -1232 320 -1232
WIRE -640 -1168 -640 -1264
WIRE -640 -1168 -784 -1168
WIRE 64 -1152 -96 -1152
WIRE 208 -1152 208 -1232
WIRE 208 -1152 144 -1152
WIRE 208 -1120 208 -1152
WIRE 256 -1120 208 -1120
WIRE 400 -1104 400 -1232
WIRE 400 -1104 320 -1104
WIRE 464 -1104 400 -1104
WIRE 256 -1088 208 -1088
WIRE -1840 -1072 -1888 -1072
WIRE -2032 -1056 -2080 -1056
WIRE -1936 -1056 -1984 -1056
WIRE -1888 -1056 -1888 -1072
WIRE -784 -1040 -784 -1168
WIRE -768 -1040 -784 -1040
WIRE 208 -1040 208 -1088
WIRE 208 -1040 144 -1040
WIRE -640 -1024 -640 -1168
WIRE -640 -1024 -704 -1024
WIRE -608 -1024 -640 -1024
WIRE 208 -1024 208 -1040
WIRE -992 -1008 -1072 -1008
WIRE -896 -1008 -896 -1264
WIRE -896 -1008 -912 -1008
WIRE -784 -1008 -816 -1008
WIRE -768 -1008 -784 -1008
WIRE -2032 -976 -2032 -1056
WIRE -1984 -976 -2032 -976
WIRE -1936 -976 -1936 -1056
WIRE -1888 -976 -1936 -976
WIRE -2080 -960 -2080 -976
WIRE -784 -960 -784 -1008
WIRE -800 -784 -928 -784
WIRE -608 -784 -800 -784
WIRE -2032 -768 -2096 -768
WIRE -928 -752 -928 -784
WIRE -2032 -720 -2032 -768
WIRE -1920 -720 -1952 -720
WIRE 112 -640 -16 -640
WIRE 224 -640 192 -640
WIRE -1920 -624 -1968 -624
WIRE -800 -624 -800 -784
WIRE -752 -624 -800 -624
WIRE 336 -624 288 -624
WIRE 384 -624 336 -624
WIRE -608 -608 -608 -784
WIRE -608 -608 -688 -608
WIRE 16 -608 -16 -608
WIRE 160 -608 96 -608
WIRE 224 -608 160 -608
WIRE -1056 -592 -1152 -592
WIRE -960 -592 -992 -592
WIRE -928 -592 -928 -672
WIRE -928 -592 -960 -592
WIRE -896 -592 -928 -592
WIRE -800 -592 -832 -592
WIRE -752 -592 -800 -592
WIRE -1920 -576 -1968 -576
WIRE -800 -512 -800 -592
WIRE 160 -464 160 -608
WIRE 224 -464 160 -464
WIRE 336 -464 336 -624
WIRE 336 -464 304 -464
FLAG -2080 -960 0
FLAG -1840 -1072 Stimulus
FLAG -1920 -720 9V
IOPIN -1920 -720 Out
FLAG -2096 -688 0
FLAG -1920 -624 VoutBeatPulses
IOPIN -1920 -624 Out
FLAG -1920 -576 VoutRateAnalogue
IOPIN -1920 -576 Out
FLAG -1152 -592 Stimulus
FLAG -816 -1424 0
FLAG -960 -1504 9V
IOPIN -960 -1504 In
FLAG -896 -1440 0
FLAG -672 -1440 0
FLAG -608 -1504 5v
IOPIN -608 -1504 Out
FLAG -736 -992 0
FLAG -736 -1056 5v
IOPIN -736 -1056 In
FLAG -784 -896 0
FLAG -432 -1552 5v
IOPIN -432 -1552 In
FLAG -432 -1344 0
FLAG -208 -1456 Vgnd
IOPIN -208 -1456 Out
FLAG 64 -1040 filter-out
IOPIN 64 -1040 In
FLAG 288 -1072 0
FLAG 288 -1136 5v
IOPIN 288 -1136 In
FLAG 208 -944 Vgnd
IOPIN 208 -944 In
FLAG -608 -1024 filter-out
IOPIN -608 -1024 Out
FLAG -720 -640 5v
IOPIN -720 -640 In
FLAG -720 -576 0
FLAG -608 -608 high-pass-out
IOPIN -608 -608 Out
FLAG -1072 -1008 high-pass-out
IOPIN -1072 -1008 In
FLAG -800 -432 ofset
IOPIN -800 -432 In
FLAG -96 -1152 ofset
IOPIN -96 -1152 In
FLAG 464 -1104 amplify
IOPIN 464 -1104 Out
FLAG -304 -1424 0
FLAG -304 -1488 5v
IOPIN -304 -1488 In
FLAG -64 -1552 5v
IOPIN -64 -1552 In
FLAG -64 -1344 0
FLAG 176 -1456 ref
IOPIN 176 -1456 Out
FLAG 80 -1424 0
FLAG 80 -1488 5v
IOPIN 80 -1488 In
FLAG -960 -592 a
FLAG -800 -592 b
FLAG -896 -1008 c
FLAG -784 -1008 d
FLAG 208 -1088 e
FLAG 208 -1152 f
FLAG -432 -1440 g
FLAG -64 -1440 h
FLAG 288 -1568 5v
IOPIN 288 -1568 In
FLAG 288 -1360 0
FLAG 512 -1472 ofset
IOPIN 512 -1472 Out
FLAG 416 -1440 0
FLAG 416 -1504 5v
IOPIN 416 -1504 In
FLAG 384 -624 VoutBeatPulses
IOPIN 384 -624 Out
FLAG 256 -592 0
FLAG 256 -656 5v
IOPIN 256 -656 In
FLAG -16 -608 amplify
IOPIN -16 -608 In
FLAG -16 -640 ref
IOPIN -16 -640 In
SYMBOL voltage -1984 -1072 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -89 197 Left 2
WINDOW 0 -13 54 Left 2
SYMATTR Value PWL file=PWLinput.csv
SYMATTR InstName V2
SYMBOL voltage -1888 -1072 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -386 233 Left 2
WINDOW 0 -11 56 Left 2
SYMATTR Value SINE({sineOffset} {sineAmplitude} {sineFreq})
SYMATTR InstName V3
SYMBOL voltage -2080 -1072 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 3 160 Left 2
WINDOW 0 -13 55 Left 2
SYMATTR Value {dcAmplitude}
SYMATTR InstName V1
SYMBOL voltage -2096 -784 R0
WINDOW 123 24 44 Left 2
WINDOW 39 0 0 Left 0
WINDOW 3 -46 76 Left 2
WINDOW 0 -13 57 Left 2
SYMATTR Value 9
SYMATTR InstName V4
SYMBOL res -1936 -736 R90
WINDOW 0 -9 30 VBottom 2
WINDOW 3 34 56 VTop 2
SYMATTR InstName R_Sense
SYMATTR Value 0.010
SYMBOL LM7805 -816 -1488 R0
SYMATTR InstName U1
SYMBOL cap -688 -1504 R0
WINDOW 3 -63 56 Left 2
WINDOW 0 -48 27 Left 2
SYMATTR Value 0.33µ
SYMATTR InstName C1
SYMBOL cap -912 -1504 R0
WINDOW 0 -37 29 Left 2
WINDOW 3 -42 52 Left 2
SYMATTR InstName C2
SYMATTR Value 0.1µ
SYMBOL res -800 -1024 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res -896 -1024 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 35 59 VTop 2
SYMATTR InstName R2
SYMATTR Value 100k
SYMBOL cap -704 -1280 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 900n
SYMBOL cap -768 -896 R180
WINDOW 0 24 56 Left 2
WINDOW 3 24 8 Left 2
SYMATTR InstName C4
SYMATTR Value 450n
SYMBOL Opamps\\opamp2 -736 -1088 R0
SYMATTR InstName U2
SYMATTR Value TL081
SYMBOL res -448 -1568 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res -448 -1440 R0
SYMATTR InstName R4
SYMATTR Value 100k
SYMBOL res 160 -1168 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL res 160 -1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 336 -1248 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 400k
SYMBOL res 224 -928 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R8
SYMATTR Value 400k
SYMBOL Opamps\\opamp2 -720 -672 R0
WINDOW 3 12 96 Left 2
SYMATTR Value TL081
SYMATTR InstName U4
SYMBOL res -816 -528 R0
SYMATTR InstName R9
SYMATTR Value 2000k
SYMBOL res -944 -768 R0
SYMATTR InstName R10
SYMATTR Value 750530
SYMBOL cap -832 -608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C5
SYMATTR Value 0.1µ
SYMBOL cap -992 -608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 0.1µ
SYMBOL res -80 -1568 R0
SYMATTR InstName R11
SYMATTR Value 150k
SYMBOL res -80 -1440 R0
SYMATTR InstName R12
SYMATTR Value 100k
SYMBOL Opamps\\opamp2 -304 -1520 R0
SYMATTR InstName U5
SYMATTR Value TL081
SYMBOL Opamps\\opamp2 80 -1520 R0
SYMATTR InstName U6
SYMATTR Value TL081
SYMBOL res 272 -1584 R0
SYMATTR InstName R14
SYMATTR Value 150k
SYMBOL res 272 -1456 R0
SYMATTR InstName R15
SYMATTR Value 150k
SYMBOL Opamps\\opamp2 416 -1536 R0
SYMATTR InstName U7
SYMATTR Value TL081
SYMBOL res 208 -656 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 10k
SYMBOL res 112 -624 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R17
SYMATTR Value 10k
SYMBOL res 320 -480 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R13
SYMATTR Value 1000k
SYMBOL Comparators\\LT1018 256 -624 R0
WINDOW 3 -46 64 Left 2
SYMATTR InstName U3
SYMBOL Opamps\\opamp2 288 -1168 R0
SYMATTR InstName U9
SYMATTR Value TLC2272
TEXT -2080 -1120 Left 2 !.tran 0 {transtop} 0 {timestep}
TEXT -1952 -1168 Left 2 !.include E344cfg.txt
TEXT -2288 -1384 Left 2 ;Don't change these -- used for auto-assessments.\nYou may modify input files while developing.\nFor submission: \n  * Use only 9V supply \n  * Connect "Stimulus" to your input\n  * Connect "VoutXXXX" to your output signals.\n  * Only one label name per net.
TEXT -2280 -1168 Left 2 ;Config file:
TEXT -2280 -1120 Left 2 ;Analysis setup:
TEXT -2272 -744 Left 2 ;Battery
TEXT -2280 -1032 Left 2 ;Sensor-\nemulating \nstimulus
TEXT -2272 -608 Left 2 ;Assessed nets:\nConnect to your outputs
TEXT -1336 -1488 Left 2 ;W. Deyzel.,  21750793\nDC = 1900 mV\nHeart rate pk = 66.6 mV
TEXT -1344 -1552 Left 2 !.incl TLC2272.LIB
TEXT -1344 -1528 Left 2 !.incl TL081.lib
LINE Normal -1792 -1008 -1856 -1008 2
LINE Normal -1792 -864 -1792 -1008 2
LINE Normal -1808 -880 -1792 -864 2
LINE Normal -1792 -864 -1808 -880 2
LINE Normal -1776 -880 -1792 -864 2
LINE Normal -2128 -1008 -2112 -1008 2
LINE Normal -2128 -928 -2128 -1008 2
LINE Normal -2128 -912 -2128 -928 2
LINE Normal -2096 -912 -2128 -912 2
LINE Normal -2112 -928 -2096 -912 2
LINE Normal -2096 -912 -2112 -928 2
LINE Normal -2112 -896 -2096 -912 2
LINE Normal -1968 -944 -1968 -992 2
LINE Normal -1856 -944 -1968 -944 2
LINE Normal -1856 -896 -1856 -944 2
LINE Normal -1872 -912 -1856 -896 2
LINE Normal -1856 -896 -1872 -912 2
LINE Normal -1840 -912 -1856 -896 2
LINE Normal -2304 -544 -2304 -1408 1
LINE Normal -1680 -1408 -1680 -544 1
LINE Normal -1680 -544 -2304 -544 1
LINE Normal -1680 -1408 -2304 -1408 1
